{"remainingRequest":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\src\\views\\User\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\src\\views\\User\\User.vue","mtime":1640260674491},{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1607602244340},{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\babel-loader\\lib\\index.js","mtime":1607613339442},{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1607602244340},{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\vue-loader\\lib\\index.js","mtime":1640247786018}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb21tb25Gb3JtIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvQ29tbW9uRm9ybSI7CmltcG9ydCBDb21tb25UYWJsZSBmcm9tICIuLi8uLi9jb21wb25lbnRzL0NvbW1vblRhYmxlIjsKaW1wb3J0IHsgZ2V0VXNlciB9IGZyb20gIi4uLy4uL2FwaS9kYXRhIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvbW1vbkZvcm0sCiAgICBDb21tb25UYWJsZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcGVyYXRlVHlwZTogImFkZCIsCiAgICAgIGlzU2hvdzogZmFsc2UsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIHRhYmxlTGFiZWw6IFsKICAgICAgICB7CiAgICAgICAgICBwcm9wOiAibmFtZSIsCiAgICAgICAgICBsYWJlbDogIuWnk+WQjSIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBwcm9wOiAiYWdlIiwKICAgICAgICAgIGxhYmVsOiAi5bm06b6EIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHByb3A6ICJzZXhMYWJlbCIsCiAgICAgICAgICBsYWJlbDogIuaAp+WIqyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBwcm9wOiAiYmlydGgiLAogICAgICAgICAgbGFiZWw6ICLlh7rnlJ/ml6XmnJ8iLAogICAgICAgICAgd2lkdGg6IDIwMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHByb3A6ICJhZGRyIiwKICAgICAgICAgIGxhYmVsOiAi5Zyw5Z2AIiwKICAgICAgICAgIHdpZHRoOiAzMjAsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY29uZmlnOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICB0b3RhbDogMzAsCiAgICAgIH0sCiAgICAgIG9wZXJhdGVGb3JtOiB7CiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgYWRkcjogIiIsCiAgICAgICAgYWdlOiAiIiwKICAgICAgICBiaXJ0aDogIiIsCiAgICAgICAgc2V4OiAiIiwKICAgICAgfSwKICAgICAgb3BlcmF0ZUZvcm1MYWJlbDogWwogICAgICAgIHsKICAgICAgICAgIG1vZGVsOiAibmFtZSIsCiAgICAgICAgICBsYWJlbDogIuWnk+WQjSIsCiAgICAgICAgICB0eXBlOiAiaW5wdXQiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbW9kZWw6ICJhZ2UiLAogICAgICAgICAgbGFiZWw6ICLlubTpvoQiLAogICAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG1vZGVsOiAic2V4IiwKICAgICAgICAgIGxhYmVsOiAi5oCn5YirIiwKICAgICAgICAgIHR5cGU6ICJzZWxlY3QiLAogICAgICAgICAgb3B0czogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbGFiZWw6ICLnlLciLAogICAgICAgICAgICAgIHZhbHVlOiAxLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbGFiZWw6ICLlpbMiLAogICAgICAgICAgICAgIHZhbHVlOiAwLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG1vZGVsOiAiYmlydGgiLAogICAgICAgICAgbGFiZWw6ICLlh7rnlJ/ml6XmnJ8iLAogICAgICAgICAgdHlwZTogImRhdGUiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbW9kZWw6ICJhZGRyIiwKICAgICAgICAgIGxhYmVsOiAi5Zyw5Z2AIiwKICAgICAgICAgIHR5cGU6ICJpbnB1dCIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgc2VhcmNoRnJvbTogewogICAgICAgIGtleXdvcmQ6ICIiLAogICAgICB9LAogICAgICBmb3JtTGFiZWw6IFsKICAgICAgICB7CiAgICAgICAgICBtb2RlbDogImtleXdvcmQiLAogICAgICAgICAgbGFiZWw6ICIiLAogICAgICAgICAgdHlwZTogImlucHV0IiwKICAgICAgICB9LAogICAgICBdLAogICAgICB0YWJsZURhdGE6IFsKICAgICAgICB7CiAgICAgICAgICBkYXRlOiAiMjAxNy0wNS0wNCIsCiAgICAgICAgICBuYW1lOiAi5bCP5bCPIiwKICAgICAgICAgIGFkZHJlc3M6ICLmtZnmsZ/nnIHmna3lt57luILljYPlspvmuZbplYcg6Ziz5YWJ6LevIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGRhdGU6ICIxOTU2LTA1LTA0IiwKICAgICAgICAgIG5hbWU6ICLniLfniLciLAogICAgICAgICAgYWRkcmVzczogIua1meaxn+ecgeadreW3nuW4guWNg+Wym+a5lumVhyDmuIXms6LoirHlm60iLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgZGF0ZTogIjE5NTgtMDUtMDQiLAogICAgICAgICAgbmFtZTogIuWltuWltiIsCiAgICAgICAgICBhZGRyZXNzOiAi5rWZ5rGf55yB5p2t5bee5biC5Y2D5bKb5rmW6ZWHIOWGrOeTnOS5jCIsCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgfSwKICBtb3VudGVkKCl7CiAgICBjb25zb2xlLmxvZygxMSkKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldExpc3QobmFtZSA9ICIiKSB7CiAgICAgIGNvbnNvbGUubG9nKG5hbWUpOwogICAgICB0aGlzLmNvbmZpZy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgLy8g5pCc57Si5pe277yM6aG156CB6ZyA6KaB6K6+572u5Li6Me+8jOaJjeiDveato+ehrui/lOWbnuaVsOaNru+8jOWboOS4uuaVsOaNruaYr+S7juesrOS4gOmhteW8gOWni+i/lOWbnueahAogICAgICBuYW1lID8gKHRoaXMuY29uZmlnLnBhZ2UgPSAxKSA6ICIiOwogICAgICAvLyB0aGlzLiRodHRwLmdldCgiL2FwaS91c2VyL2dldFVzZXIiLCB7CiAgICAgIC8vICAgcGFyYW1zOiB7CiAgICAgIC8vICAgICBwYWdlOiB0aGlzLmNvbmZpZy5wYWdlLAogICAgICAvLyAgICAgbmFtZSwKICAgICAgLy8gICB9LAogICAgICAvLyB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy5jb25maWcpOwogICAgICBnZXRVc2VyKHsKICAgICAgICBwYWdlOiB0aGlzLmNvbmZpZy5wYWdlLAogICAgICAgIG5hbWUsCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmxpc3QubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICBpdGVtLnNleExhYmVsID0gaXRlbS5zZXggPT09IDAgPyAi5aWzIiA6ICLnlLciOwogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jb25maWcudG90YWwgPSByZXMuY291bnQ7CiAgICAgICAgdGhpcy5jb25maWcubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRVc2VyKCkgewogICAgICB0aGlzLm9wZXJhdGVGb3JtID0ge307CiAgICAgIHRoaXMub3BlcmF0ZVR5cGUgPSAiYWRkIjsKICAgICAgdGhpcy5pc1Nob3cgPSB0cnVlOwogICAgfSwKICAgIGVkaXRVc2VyKHJvdykgewogICAgICB0aGlzLm9wZXJhdGVUeXBlID0gImVkaXQiOwogICAgICB0aGlzLmlzU2hvdyA9IHRydWU7CiAgICAgIHRoaXMub3BlcmF0ZUZvcm0gPSByb3c7CiAgICB9LAogICAgY29uZmlybSgpIHsKICAgICAgaWYgKHRoaXMub3BlcmF0ZVR5cGUgPT09ICJlZGl0IikgewogICAgICAgIGNvbnNvbGUubG9nKHRoaXMub3BlcmF0ZUZvcm0pOwogICAgICAgIHRoaXMuJGh0dHAucG9zdCgiL2FwaS91c2VyL2VkaXQiLCB0aGlzLm9wZXJhdGVGb3JtKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRodHRwLnBvc3QoIi9hcGkvdXNlci9hZGQiLCB0aGlzLm9wZXJhdGVGb3JtKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGRlbFVzZXIocm93KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oIuatpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeaWh+S7tiwg5piv5ZCm57un57utPyIsICLmj5DnpLoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBsZXQgaWQgPSByb3cuaWQ7CiAgICAgICAgICB0aGlzLiRodHRwCiAgICAgICAgICAgIC5nZXQoIi9hcGkvdXNlci9kZWwiLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICBpZCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOaIkOWKnyEiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogImluZm8iLAogICAgICAgICAgICBtZXNzYWdlOiAi5bey5Y+W5raI5Yig6ZmkIiwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAp9Owo="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/views/User","sourcesContent":["<template>\n  <div class=\"manage\">\n    <el-dialog\n      :title=\"operateType === 'add' ? '新增用户' : '更新用户'\"\n      :visible.sync=\"isShow\"\n    >\n      <common-form\n        :formLabel=\"operateFormLabel\"\n        :form=\"operateForm\"\n        ref=\"form\"\n        :inline=\"true\"\n      ></common-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"isShow = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"confirm\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <div class=\"manage-header\">\n      <el-button type=\"primary\" @click=\"addUser\">+ 新增</el-button>\n      <common-form :inline=\"true\" :formLabel=\"formLabel\" :form=\"searchFrom\">\n        <el-button type=\"primary\" @click=\"getList(searchFrom.keyword)\">搜索</el-button>\n      </common-form>\n    </div>\n\n    <common-table\n      :tableData=\"tableData\"\n      :tableLabel=\"tableLabel\"\n      :config=\"config\"\n      @changePage=\"getList()\"\n      @edit=\"editUser\"\n      @del=\"delUser\"\n    ></common-table>\n  </div>\n</template>\n\n<script>\nimport CommonForm from \"../../components/CommonForm\";\nimport CommonTable from \"../../components/CommonTable\";\nimport { getUser } from \"../../api/data\";\nexport default {\n  components: {\n    CommonForm,\n    CommonTable,\n  },\n  data() {\n    return {\n      operateType: \"add\",\n      isShow: false,\n      tableData: [],\n      tableLabel: [\n        {\n          prop: \"name\",\n          label: \"姓名\",\n        },\n        {\n          prop: \"age\",\n          label: \"年龄\",\n        },\n        {\n          prop: \"sexLabel\",\n          label: \"性别\",\n        },\n        {\n          prop: \"birth\",\n          label: \"出生日期\",\n          width: 200,\n        },\n        {\n          prop: \"addr\",\n          label: \"地址\",\n          width: 320,\n        },\n      ],\n      config: {\n        page: 1,\n        total: 30,\n      },\n      operateForm: {\n        name: \"\",\n        addr: \"\",\n        age: \"\",\n        birth: \"\",\n        sex: \"\",\n      },\n      operateFormLabel: [\n        {\n          model: \"name\",\n          label: \"姓名\",\n          type: \"input\",\n        },\n        {\n          model: \"age\",\n          label: \"年龄\",\n          type: \"input\",\n        },\n        {\n          model: \"sex\",\n          label: \"性别\",\n          type: \"select\",\n          opts: [\n            {\n              label: \"男\",\n              value: 1,\n            },\n            {\n              label: \"女\",\n              value: 0,\n            },\n          ],\n        },\n        {\n          model: \"birth\",\n          label: \"出生日期\",\n          type: \"date\",\n        },\n        {\n          model: \"addr\",\n          label: \"地址\",\n          type: \"input\",\n        },\n      ],\n      searchFrom: {\n        keyword: \"\",\n      },\n      formLabel: [\n        {\n          model: \"keyword\",\n          label: \"\",\n          type: \"input\",\n        },\n      ],\n      tableData: [\n        {\n          date: \"2017-05-04\",\n          name: \"小小\",\n          address: \"浙江省杭州市千岛湖镇 阳光路\",\n        },\n        {\n          date: \"1956-05-04\",\n          name: \"爷爷\",\n          address: \"浙江省杭州市千岛湖镇 清波花园\",\n        },\n        {\n          date: \"1958-05-04\",\n          name: \"奶奶\",\n          address: \"浙江省杭州市千岛湖镇 冬瓜乌\",\n        },\n      ],\n    };\n  },\n  mounted(){\n    console.log(11)\n  },\n  methods: {\n    getList(name = \"\") {\n      console.log(name);\n      this.config.loading = true;\n      // 搜索时，页码需要设置为1，才能正确返回数据，因为数据是从第一页开始返回的\n      name ? (this.config.page = 1) : \"\";\n      // this.$http.get(\"/api/user/getUser\", {\n      //   params: {\n      //     page: this.config.page,\n      //     name,\n      //   },\n      // });\n      console.log(this.config);\n      getUser({\n        page: this.config.page,\n        name,\n      }).then((res) => {\n        this.tableData = res.list.map((item) => {\n          item.sexLabel = item.sex === 0 ? \"女\" : \"男\";\n          return item;\n        });\n        this.config.total = res.count;\n        this.config.loading = false;\n      });\n    },\n    addUser() {\n      this.operateForm = {};\n      this.operateType = \"add\";\n      this.isShow = true;\n    },\n    editUser(row) {\n      this.operateType = \"edit\";\n      this.isShow = true;\n      this.operateForm = row;\n    },\n    confirm() {\n      if (this.operateType === \"edit\") {\n        console.log(this.operateForm);\n        this.$http.post(\"/api/user/edit\", this.operateForm).then((res) => {\n          console.log(res.data);\n          this.isShow = false;\n          this.getList();\n        });\n      } else {\n        this.$http.post(\"/api/user/add\", this.operateForm).then((res) => {\n          console.log(res.data);\n          this.isShow = false;\n          this.getList();\n        });\n      }\n    },\n    delUser(row) {\n      this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          let id = row.id;\n          this.$http\n            .get(\"/api/user/del\", {\n              params: {\n                id,\n              },\n            })\n            .then((res) => {\n              console.log(res.data);\n              this.$message({\n                type: \"success\",\n                message: \"删除成功!\",\n              });\n              this.getList();\n            });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\",\n          });\n        });\n    },\n  },\n  created() {\n    this.getList();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/scss/common\";\n</style>\n"]}]}