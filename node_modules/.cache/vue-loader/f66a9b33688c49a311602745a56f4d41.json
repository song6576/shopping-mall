{"remainingRequest":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\src\\views\\User\\User.vue?vue&type=style&index=0&id=768dc365&lang=scss&scoped=true&","dependencies":[{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\src\\views\\User\\User.vue","mtime":1640247088634},{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\css-loader\\dist\\cjs.js","mtime":1599556850501},{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1640247786018},{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\postcss-loader\\src\\index.js","mtime":1599556851201},{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1607602258658},{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1607602244340},{"path":"F:\\前端学习之路\\vue笔记\\通用后台管理\\shopping_mall\\node_modules\\vue-loader\\lib\\index.js","mtime":1640247786018}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICJAL2Fzc2V0cy9zY3NzL2NvbW1vbiI7Cg=="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+OA","file":"User.vue","sourceRoot":"src/views/User","sourcesContent":["<template>\n  <div class=\"manage\">\n    <el-dialog\n      :title=\"operateType === 'add' ? '新增用户' : '更新用户'\"\n      :visible.sync=\"isShow\"\n    >\n      <common-form\n        :formLabel=\"operateFormLabel\"\n        :form=\"operateForm\"\n        ref=\"form\"\n        :inline=\"true\"\n      ></common-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"isShow = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"confirm\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <div class=\"manage-header\">\n      <el-button type=\"primary\" @click=\"addUser\">+ 新增</el-button>\n      <common-form :inline=\"true\" :formLabel=\"formLabel\" :form=\"searchFrom\">\n        <el-button type=\"primary\" @click=\"getList(searchFrom.keyword)\">搜索</el-button>\n      </common-form>\n    </div>\n\n    <common-table\n      :tableData=\"tableData\"\n      :tableLabel=\"tableLabel\"\n      :config=\"config\"\n      @changePage=\"getList()\"\n      @edit=\"editUser\"\n      @del=\"delUser\"\n    ></common-table>\n  </div>\n</template>\n\n<script>\nimport CommonForm from \"../../components/CommonForm\";\nimport CommonTable from \"../../components/CommonTable\";\nimport { getUser } from \"../../api/data\";\nexport default {\n  components: {\n    CommonForm,\n    CommonTable,\n  },\n  data() {\n    return {\n      operateType: \"add\",\n      isShow: false,\n      tableData: [],\n      tableLabel: [\n        {\n          prop: \"name\",\n          label: \"姓名\",\n        },\n        {\n          prop: \"age\",\n          label: \"年龄\",\n        },\n        {\n          prop: \"sexLabel\",\n          label: \"性别\",\n        },\n        {\n          prop: \"birth\",\n          label: \"出生日期\",\n          width: 200,\n        },\n        {\n          prop: \"addr\",\n          label: \"地址\",\n          width: 320,\n        },\n      ],\n      config: {\n        page: 1,\n        total: 30,\n      },\n      operateForm: {\n        name: \"\",\n        addr: \"\",\n        age: \"\",\n        birth: \"\",\n        sex: \"\",\n      },\n      operateFormLabel: [\n        {\n          model: \"name\",\n          label: \"姓名\",\n          type: \"input\",\n        },\n        {\n          model: \"age\",\n          label: \"年龄\",\n          type: \"input\",\n        },\n        {\n          model: \"sex\",\n          label: \"性别\",\n          type: \"select\",\n          opts: [\n            {\n              label: \"男\",\n              value: 1,\n            },\n            {\n              label: \"女\",\n              value: 0,\n            },\n          ],\n        },\n        {\n          model: \"birth\",\n          label: \"出生日期\",\n          type: \"date\",\n        },\n        {\n          model: \"addr\",\n          label: \"地址\",\n          type: \"input\",\n        },\n      ],\n      searchFrom: {\n        keyword: \"\",\n      },\n      formLabel: [\n        {\n          model: \"keyword\",\n          label: \"\",\n          type: \"input\",\n        },\n      ],\n      tableData: [\n        {\n          date: \"2017-05-04\",\n          name: \"小小\",\n          address: \"浙江省杭州市千岛湖镇 阳光路\",\n        },\n        {\n          date: \"1956-05-04\",\n          name: \"爷爷\",\n          address: \"浙江省杭州市千岛湖镇 清波花园\",\n        },\n        {\n          date: \"1958-05-04\",\n          name: \"奶奶\",\n          address: \"浙江省杭州市千岛湖镇 冬瓜乌\",\n        },\n      ],\n    };\n  },\n  methods: {\n    getList(name = \"\") {\n      console.log(name);\n      this.config.loading = true;\n      // 搜索时，页码需要设置为1，才能正确返回数据，因为数据是从第一页开始返回的\n      name ? (this.config.page = 1) : \"\";\n      // this.$http.get(\"/api/user/getUser\", {\n      //   params: {\n      //     page: this.config.page,\n      //     name,\n      //   },\n      // });\n      console.log(this.config);\n      getUser({\n        page: this.config.page,\n        name,\n      }).then((res) => {\n        this.tableData = res.list.map((item) => {\n          item.sexLabel = item.sex === 0 ? \"女\" : \"男\";\n          return item;\n        });\n        this.config.total = res.count;\n        this.config.loading = false;\n      });\n    },\n    addUser() {\n      this.operateForm = {};\n      this.operateType = \"add\";\n      this.isShow = true;\n    },\n    editUser(row) {\n      this.operateType = \"edit\";\n      this.isShow = true;\n      this.operateForm = row;\n    },\n    confirm() {\n      if (this.operateType === \"edit\") {\n        console.log(this.operateForm);\n        this.$http.post(\"/api/user/edit\", this.operateForm).then((res) => {\n          console.log(res.data);\n          this.isShow = false;\n          this.getList();\n        });\n      } else {\n        this.$http.post(\"/api/user/add\", this.operateForm).then((res) => {\n          console.log(res.data);\n          this.isShow = false;\n          this.getList();\n        });\n      }\n    },\n    delUser(row) {\n      this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          let id = row.id;\n          this.$http\n            .get(\"/api/user/del\", {\n              params: {\n                id,\n              },\n            })\n            .then((res) => {\n              console.log(res.data);\n              this.$message({\n                type: \"success\",\n                message: \"删除成功!\",\n              });\n              this.getList();\n            });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\",\n          });\n        });\n    },\n  },\n  created() {\n    this.getList();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/scss/common\";\n</style>\n"]}]}